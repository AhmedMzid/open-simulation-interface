cmake_minimum_required(VERSION 3.7)
project(open-simulation-interface)
find_package(Protobuf 2.6.1 REQUIRED)
file(GLOB OSI_PROTO_FILES osi_*.proto)
PROTOBUF_GENERATE_CPP(PROTO_SRC PROTO_HEADER ${OSI_PROTO_FILES})
add_library(open_simulation_interface STATIC ${PROTO_SRC} ${PROTO_HEADER})
target_include_directories(open_simulation_interface PUBLIC ${PROTOBUF_INCLUDE_DIR})
target_link_libraries(open_simulation_interface PUBLIC ${PROTOBUF_LIBRARY})
add_library(open_simulation_interface_pic STATIC ${PROTO_SRC} ${PROTO_HEADER})
set_property(TARGET open_simulation_interface_pic PROPERTY POSITION_INDEPENDENT_CODE ON)
target_include_directories(open_simulation_interface_pic PUBLIC ${PROTOBUF_INCLUDE_DIR})
target_link_libraries(open_simulation_interface_pic PUBLIC ${PROTOBUF_LIBRARY})
set (OSI_PROTOBUF_INCLUDE_PATH ${CMAKE_CURRENT_BINARY_DIR} CACHE INTERNAL "[OSI] Path to generated protobuf files for the open simulation interface.")
